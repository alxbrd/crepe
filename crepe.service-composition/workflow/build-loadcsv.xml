<?xml version="1.0"?>
<project name="Load simulation state from CSV files" basedir="..">
	
	<target name="main" depends="loadCSV1">
		<!-- Load models -->
		<epsilon.emf.loadModel name="OUT"
				 	modelFile="${basedir}/models/predictors.xmi"
					metamodelFile="${basedir}/models/connectedNodes.ecore" 
					read="false"/>
		
		<!-- Run Surrogate Evaluation -->
		<epsilon.eol src="${basedir}/transformations/ImportCSVs.eol">
			<model ref="HOPS" />
			<model ref="NODES" />
			<model ref="OUT" />
		</epsilon.eol>
		
		<epsilon.disposeModels/>
	</target>
	
	<target name="loadCSV1" depends="loadCSV2">
		<epsilon.loadModel name="HOPS" type="CSV">
			<parameter name="file" value="${basedir}/files/hops.csv"/>
			<parameter name="readOnLoad" value="true"/>
		</epsilon.loadModel>
	</target>
	
	<target name="loadCSV2">
		<epsilon.loadModel name="NODES" type="CSV">
			<parameter name="file" value="${basedir}/files/scenarioConfiguration.csv"/>
			<parameter name="readOnLoad" value="true"/>
		</epsilon.loadModel>
	</target>
</project>